---
title: "Google OAuth: redirect_uri_mismatch"
source: ["Auth"]
errorCode: ["400", "redirect_uri_mismatch"]
tags: ["Self-hosting"]
---
import { Steps } from 'nextra/components'
import {
    NumberOfContent,
    NumberWithMdx
} from "@/app/_components/NumberOfContent.jsx"
import { CardInfo } from "@/app/_components/CardInfo.jsx"
import { Callout } from 'nextra/components'


# Google OAuth: `redirect_uri_mismatch`

**The Problem:** The URL that SpaceDF sends to Google does not **exactly match** the URL you allowed in the Google Cloud Console.

## 1. The Golden Rule
To fix this, you must understand how SpaceDF constructs the URL.

| Location | Config Name | Value Format | Example |
| :--- | :--- | :--- | :--- |
| **Your Server (.env)** | `GOOGLE_CALLBACK_URL` | **Base Domain Only** | `https://your-domain.com` |
| **Google Console** | `Authorized Redirect URI` | **Full Path** | `https://your-domain.com/auth/google/callback` |

<CardInfo classNames={{
    container: "!mt-6 !p-3 shadow-none",
    title: "!text-base",
    description: "!text-sm"
  }}
  title="‚ö†Ô∏è Crucial Difference"
  >
    SpaceDF automatically appends `/auth/google/callback` to your `.env` value.<br/>
    üëâ **Do NOT** add the path in your `.env` file.<br/>
    üëâ **DO** add the path in Google Console.
</CardInfo>

## 2. Step-by-Step Fix

<Steps>
    ### Check your `.env` file
    Open your `.env` file and ensure `GOOGLE_CALLBACK_URL` contains **only the protocol and domain** (and port if local).
    ```bash copy
    # ‚úÖ CORRECT (Base URL only)
    GOOGLE_CALLBACK_URL=[https://your-domain.com](https://your-domain.com)

    # ‚ùå INCORRECT (Do not add the path here)
    GOOGLE_CALLBACK_URL=[https://your-domain.com/auth/google/callback](https://your-domain.com/auth/google/callback)
    ```

    ### Update Google Cloud Console
    Please follow [Google Oauth Guide](docs/getting-started/self-hosting/docker/advanced-setup#google-oauth) in the Advanced Setup section

    ### Restart Services
    Environment variables are only loaded when the container starts.
    ```bash copy
    docker compose down
    docker compose up -d
    ```
</Steps>

## 3. Common Mistakes Checklist

<CardInfo classNames={{
    container: "!mt-6 !p-3 shadow-none",
    title: "!text-lg",
    description: "!text-base"
  }}
  title="üìù Troubleshooting Checklist"
  >
    - Protocol: Did you write `http` in `.env` but `https` in Google Console? (Must match).
    - Trailing Slash: Did you put `https://site.com/` in `.env`? (Remove the trailing slash).
    - Port: Are you using port `80` or `443` but explicitely wrote `:3000`?
    - Environment: Did you configure the Production URL but are trying to log in from Localhost? (You need both entries in Google Console).
</CardInfo>

{/* <Callout type="info">
***Notes***
- Google OAuth is **not enabled in Quick Start**.
- This error only applies when using **Advanced Setup**.
- Each environment (local, staging, production) requires its own redirect URI entry.
</Callout> */}